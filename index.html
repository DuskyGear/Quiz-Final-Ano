<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz de Ondulat√≥ria e Eletricidade (ENEM)</title>
    <!-- Tailwind CSS CDN --><script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for a better look following UX/UI principles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e0f2fe; /* Blue 50 - Fundo muito suave, quase branco */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Alinha o card mais para o topo, n√£o centraliza verticalmente */
            min-height: 100vh;
            padding: 2rem 1rem; /* Padding responsivo */
        }
        .quiz-card {
            max-width: 700px;
            width: 100%;
            background-color: #ffffff; /* Branco puro para o card */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); /* Sombra mais suave */
            border-radius: 12px; /* Cantos mais arredondados */
            padding: 2.5rem; /* Mais padding interno */
            border: 1px solid #e2e8f0; /* Borda sutil */
        }
        .option-button {
            transition: all 0.2s ease-in-out;
            border: 1px solid #d1d5db; /* Gray 300 - Borda sutil para op√ß√µes */
            color: #1f2937; /* Gray 800 */
        }
        .option-button:hover:not(.disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3); /* Sombra azul suave no hover */
            background-color: #eff6ff; /* Blue 50 - Fundo mais claro no hover */
            border-color: #93c5fd; /* Blue 300 */
        }
        /* Estilo para op√ß√£o selecionada para confirma√ß√£o */
        .selected-for-confirmation {
            background-color: #bfdbfe; /* Blue 200 */
            border-color: #60a5fa; /* Blue 400 */
            box-shadow: 0 0 0 3px #60a5fa; /* Anel azul para destaque */
            color: #1f2937; /* Garante boa legibilidade */
        }
        /* Cor de acerto */
        .correct {
            background-color: #22c55e; /* Green 500 */
            color: white;
            border-color: #16a34a; /* Green 600 */
            font-weight: 600; /* Semibold */
        }
        /* Cor de erro */
        .incorrect {
            background-color: #ef4444; /* Red 500 */
            color: white;
            border-color: #dc2626; /* Red 600 */
            font-weight: 600; /* Semibold */
        }
        .feedback-message {
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Estilos para o bot√£o Pr√≥xima Quest√£o */
        #next-button {
            background-color: #2563eb; /* Blue 600 */
            color: white;
            font-weight: bold;
        }
        #next-button:hover:not(:disabled) {
            background-color: #1e40af; /* Blue 700 */
        }
        #next-button:disabled {
            background-color: #93c5fd; /* Blue 300 */
            cursor: not-allowed;
        }
        /* Estilos para a tela final */
        #final-screen button {
            background-color: #2563eb; /* Blue 600 */
            color: white;
            font-weight: bold;
        }
        #final-screen button:hover {
            background-color: #1e40af; /* Blue 700 */
        }
    </style>
</head>
<body>

    <div id="app" class="quiz-card p-6 md:p-10">
        <h1 class="text-3xl font-extrabold text-center text-blue-700 mb-6 md:mb-8">F√≠sica ENEM: Ondulat√≥ria e Eletricidade</h1>

        <!-- Score and Progress --><div class="flex justify-between items-center text-gray-600 mb-6 pb-4 border-b border-gray-200">
            <span id="score-display" class="text-xl font-semibold">Acertos: 0</span>
            <span id="progress-display" class="text-lg">Quest√£o 1/10</span>
        </div>

        <!-- Quiz Area --><div id="quiz-area">
            <!-- Question Text --><p id="question-text" class="text-2xl font-semibold text-gray-800 mb-8"></p>

            <!-- Options Container --><div id="options-container" class="space-y-4 mb-8">
                <!-- Buttons will be inserted here by JavaScript --></div>

            <!-- Confirmation/Feedback Area --><div id="feedback-area" class="min-h-[100px] mb-6">
                <!-- Confirmation prompt or final feedback will be inserted here --></div>

            <!-- Next Button --><button id="next-button" onclick="nextQuestion()" class="w-full py-3 rounded-lg disabled:opacity-70 transition duration-150" disabled>
                Pr√≥xima Quest√£o
            </button>
        </div>

        <!-- Final Screen Area --><div id="final-screen" class="text-center hidden">
            <h2 class="text-4xl font-bold text-green-600 mb-4">Quiz Conclu√≠do!</h2>
            <p id="final-score" class="text-3xl text-gray-800 mb-8"></p>
            <button onclick="startQuiz()" class="w-full py-3 rounded-lg transition duration-150">
                Reiniciar Quiz
            </button>
        </div>
    </div>

    <script>
        const QUIZ_DATA = [
            {
                difficulty: "F√°cil",
                question: "Qual √© a principal caracter√≠stica que diferencia uma onda mec√¢nica de uma onda eletromagn√©tica, como a luz?",
                options: [
                    { text: "A capacidade de sofrer o fen√¥meno da polariza√ß√£o.", isCorrect: false, rationale: "A polariza√ß√£o pode ocorrer em ondas mec√¢nicas transversais (como em uma corda), mas a propaga√ß√£o no v√°cuo √© a distin√ß√£o crucial." },
                    { text: "A velocidade de propaga√ß√£o ser sempre constante, independentemente do meio.", isCorrect: false, rationale: "A velocidade de ambos os tipos de onda depende do meio de propaga√ß√£o, alterando-se ao mudar de um para o outro (refra√ß√£o)." },
                    { text: "A necessidade de um meio material para se propagar.", isCorrect: true, rationale: "As ondas mec√¢nicas (som, ondas em cordas) requerem um meio material, enquanto as eletromagn√©ticas (luz, r√°dio) propagam-se no v√°cuo." },
                    { text: "O fato de a onda eletromagn√©tica ser sempre transversal.", isCorrect: false, rationale: "Embora a luz seja transversal, a caracter√≠stica fundamental que as diferencia √© a necessidade de um meio para as ondas mec√¢nicas." }
                ],
                videoLink: "https://youtu.be/btNvr8KAQyM?si=q3AYFpgnl7xWSqY2" // Exemplo
            },
            {
                difficulty: "F√°cil",
                question: "Quando uma onda passa de um meio de propaga√ß√£o para outro (fen√¥meno da refra√ß√£o), qual propriedade ondulat√≥ria necessariamente se mant√©m constante?",
                options: [
                    { text: "Comprimento de onda.", isCorrect: false, rationale: "O comprimento de onda √© alterado, pois a velocidade muda no novo meio e a frequ√™ncia se mant√©m." },
                    { text: "Velocidade de propaga√ß√£o.", isCorrect: false, rationale: "A mudan√ßa de meio causa, por defini√ß√£o, uma altera√ß√£o na velocidade de propaga√ß√£o da onda." },
                    { text: "Frequ√™ncia.", isCorrect: true, rationale: "A frequ√™ncia √© determinada pela fonte que gerou a onda e, por isso, n√£o se altera quando a onda muda de meio (refra√ß√£o)." },
                    { text: "Amplitude.", isCorrect: false, rationale: "A amplitude geralmente muda, pois depende da energia que a onda consegue carregar atrav√©s da interface entre os meios." }
                ],
                videoLink: "https://www.youtube.com/watch?v=12345b" // Exemplo
            },
            {
                difficulty: "F√°cil",
                question: "Em condutores s√≥lidos, como os fios de cobre de uma instala√ß√£o el√©trica, a corrente el√©trica √© essencialmente o movimento ordenado de quais part√≠culas?",
                options: [
                    { text: "Pr√≥tons.", isCorrect: false, rationale: "Os pr√≥tons est√£o fixos no n√∫cleo at√¥mico e n√£o se movem livremente em um condutor s√≥lido." },
                    { text: "El√©trons livres.", isCorrect: true, rationale: "Em metais, a corrente el√©trica se deve ao movimento dos el√©trons mais externos que est√£o fracamente ligados aos √°tomos e se movem livremente." },
                    { text: "N√™utrons.", isCorrect: false, rationale: "N√™utrons n√£o possuem carga el√©trica e, portanto, n√£o contribuem para a corrente el√©trica." },
                    { text: "√çons positivos e negativos.", isCorrect: false, rationale: "Em condutores s√≥lidos, os √≠ons est√£o fixos na rede cristalina, sendo o movimento dos el√©trons o respons√°vel pela corrente." }
                ],
                videoLink: "https://www.youtube.com/watch?v=12345c" // Exemplo
            },
            {
                difficulty: "F√°cil",
                question: "Qual processo de eletriza√ß√£o permite eletrizar um corpo condutor inicialmente neutro sem que haja contato com o corpo eletrizado?",
                options: [
                    { text: "Atra√ß√£o.", isCorrect: false, rationale: "Atra√ß√£o √© um efeito (polariza√ß√£o), n√£o um processo de eletriza√ß√£o que resulte em carga permanente." },
                    { text: "Atrito.", isCorrect: false, rationale: "O atrito exige o contato f√≠sico entre dois corpos." },
                    { text: "Indu√ß√£o.", isCorrect: true, rationale: "A eletriza√ß√£o por indu√ß√£o utiliza a aproxima√ß√£o de um corpo carregado seguida de aterramento, sem a necessidade de contato." },
                    { text: "Contato.", isCorrect: false, rationale: "A eletriza√ß√£o por contato exige o toque entre os corpos." }
                ],
                videoLink: "https://www.youtube.com/watch?v=12345d" // Exemplo
            },
            {
                difficulty: "F√°cil",
                question: "Segundo a Primeira Lei de Ohm, o que representa conceitualmente a resist√™ncia el√©trica de um resistor em um circuito?",
                options: [
                    { text: "A energia potencial el√©trica por unidade de carga (tens√£o).", isCorrect: false, rationale: "Essa √© a defini√ß√£o de diferen√ßa de potencial el√©trico, ou tens√£o." },
                    { text: "A oposi√ß√£o √† passagem da corrente el√©trica.", isCorrect: true, rationale: "A resist√™ncia √© a medida da dificuldade que os el√©trons encontram para se moverem atrav√©s do material." },
                    { text: "A quantidade de carga el√©trica que atravessa a se√ß√£o transversal do condutor por unidade de tempo (corrente).", isCorrect: false, rationale: "Essa √© a defini√ß√£o de intensidade da corrente el√©trica." },
                    { text: "A capacidade de um dispositivo de armazenar cargas el√©tricas.", isCorrect: false, rationale: "Essa √© a fun√ß√£o de um capacitor, n√£o a defini√ß√£o de resist√™ncia." }
                ],
                videoLink: "https://www.youtube.com/watch?v=12345e" // Exemplo
            },
            {
                difficulty: "F√°cil",
                question: "Qual √© o nome do fen√¥meno f√≠sico que descreve a transforma√ß√£o da energia el√©trica em energia t√©rmica (calor) devido √† passagem da corrente el√©trica por um condutor?",
                options: [
                    { text: "Efeito Estufa.", isCorrect: false, rationale: "O Efeito Estufa √© um fen√¥meno atmosf√©rico, n√£o relacionado √† corrente el√©trica em resistores." },
                    { text: "Efeito Fotoel√©trico.", isCorrect: false, rationale: "O Efeito Fotoel√©trico √© a emiss√£o de el√©trons por um material pela incid√™ncia de luz." },
                    { text: "Efeito Joule.", isCorrect: true, rationale: "O Efeito Joule √© a dissipa√ß√£o de energia el√©trica na forma de calor (energia t√©rmica), fundamental para aquecedores." },
                    { text: "Efeito Doppler.", isCorrect: false, rationale: "O Efeito Doppler √© um fen√¥meno ondulat√≥rio relacionado √† altera√ß√£o da frequ√™ncia percebida." }
                ],
                videoLink: "https://www.youtube.com/watch?v=12345f" // Exemplo
            },
            {
                difficulty: "F√°cil",
                question: "Em uma associa√ß√£o de resistores em s√©rie, qual grandeza el√©trica √© a mesma em todos os componentes (resistores, l√¢mpadas, etc.) do circuito?",
                options: [
                    { text: "A resist√™ncia el√©trica.", isCorrect: false, rationale: "A resist√™ncia de cada componente em s√©rie pode ser diferente." },
                    { text: "A intensidade da corrente el√©trica.", isCorrect: true, rationale: "Em um circuito em s√©rie, a corrente el√©trica n√£o tem caminhos para se dividir e, portanto, √© a mesma em todos os pontos." },
                    { text: "A diferen√ßa de potencial el√©trico.", isCorrect: false, rationale: "A tens√£o ($U$) √© dividida entre os componentes em um circuito em s√©rie, exceto se eles tiverem a mesma resist√™ncia." },
                    { text: "A pot√™ncia el√©trica dissipada.", isCorrect: false, rationale: "A pot√™ncia dissipada √© diferente em cada resistor, pois depende da sua resist√™ncia." }
                ],
                videoLink: "https://www.youtube.com/watch?v=12345g" // Exemplo
            },
            {
                difficulty: "M√©dia",
                question: "Dentre os fen√¥menos ondulat√≥rios cl√°ssicos (reflex√£o, refra√ß√£o, difra√ß√£o, interfer√™ncia e polariza√ß√£o), qual deles √© exclusivo das ondas transversais, como a luz vis√≠vel?",
                options: [
                    { text: "Refra√ß√£o.", isCorrect: false, rationale: "A refra√ß√£o ocorre em todos os tipos de ondas (mec√¢nicas e eletromagn√©ticas)." },
                    { text: "Polariza√ß√£o.", isCorrect: true, rationale: "A polariza√ß√£o s√≥ pode ocorrer em ondas onde a vibra√ß√£o √© perpendicular √† dire√ß√£o de propaga√ß√£o, ou seja, em ondas transversais." },
                    { text: "Difra√ß√£o.", isCorrect: false, rationale: "A difra√ß√£o, que √© o contorno de obst√°culos, ocorre com todos os tipos de onda." },
                    { text: "Interfer√™ncia.", isCorrect: false, rationale: "A interfer√™ncia (soma de ondas) √© um fen√¥meno comum a todas as ondas." }
                ],
                videoLink: "https://www.youtube.com/watch?v=12345h" // Exemplo
            },
            {
                difficulty: "M√©dia",
                question: "O que √© o fen√¥meno da resson√¢ncia em termos conceituais no contexto da Ondulat√≥ria?",
                options: [
                    { text: "O desvio de uma onda ao contornar obst√°culos ou passar por aberturas.", isCorrect: false, rationale: "Essa descri√ß√£o corresponde ao fen√¥meno da difra√ß√£o." },
                    { text: "O aumento da amplitude de vibra√ß√£o de um corpo quando submetido a uma frequ√™ncia externa igual √† sua frequ√™ncia natural de oscila√ß√£o.", isCorrect: true, rationale: "A resson√¢ncia √© a transfer√™ncia eficiente de energia, resultando em um aumento acentuado da amplitude de vibra√ß√£o." },
                    { text: "A mudan√ßa de dire√ß√£o de uma onda ao passar de um meio para outro com diferentes velocidades de propaga√ß√£o.", isCorrect: false, rationale: "Essa √© a defini√ß√£o do fen√¥meno da refra√ß√£o." },
                    { text: "O encontro de duas ou mais ondas, gerando um padr√£o de interfer√™ncia.", isCorrect: false, rationale: "Essa √© a defini√ß√£o de interfer√™ncia (construtiva ou destrutiva)." }
                ],
                videoLink: "https://www.youtube.com/watch?v=12345i" // Exemplo
            },
            {
                difficulty: "Dif√≠cil",
                question: "O Efeito Doppler √© a altera√ß√£o na frequ√™ncia percebida por um observador em virtude do movimento relativo entre a fonte emissora da onda e o observador. O que o Efeito Doppler indica quando um objeto astron√¥mico se afasta da Terra?",
                options: [
                    { text: "Um aumento no comprimento de onda e um desvio para o azul (Blue Shift).", isCorrect: false, rationale: "O desvio para o azul indica que o objeto est√° se aproximando, e n√£o se afastando." },
                    { text: "Uma diminui√ß√£o na frequ√™ncia e um desvio para o vermelho (Red Shift).", isCorrect: true, rationale: "Quando a fonte se afasta, a frequ√™ncia percebida diminui e o comprimento de onda aumenta, caracterizando o desvio para o vermelho (Red Shift)." },
                    { text: "Um aumento na frequ√™ncia percebida e uma diminui√ß√£o na velocidade da onda.", isCorrect: false, rationale: "A velocidade da luz √© constante no v√°cuo, e a frequ√™ncia percebida diminui quando a fonte se afasta." },
                    { text: "Nenhuma altera√ß√£o na frequ√™ncia, apenas na amplitude da onda.", isCorrect: false, rationale: "O Efeito Doppler √© uma altera√ß√£o percept√≠vel na frequ√™ncia da onda." }
                ],
                // Este link ser√° incorporado
                videoLink: "https://www.youtube.com/watch?v=Izy1sNmyunc" 
            }
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let answered = false;

        let preSelectedOption = null;
        let preSelectedButton = null;

        const questionTextElement = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const feedbackArea = document.getElementById('feedback-area');
        const nextButton = document.getElementById('next-button');
        const scoreDisplay = document.getElementById('score-display');
        const progressDisplay = document.getElementById('progress-display');
        const quizArea = document.getElementById('quiz-area');
        const finalScreen = document.getElementById('final-screen');
        const finalScore = document.getElementById('final-score');

        // Helper function to extract YouTube video ID and return embed URL
        function getYouTubeEmbedUrl(url) {
            if (!url) return null;
            let videoId = '';
            // Regex para extrair ID de URLs comuns (watch?v=, youtu.be/, etc.)
            const watchMatch = url.match(/(?:\?v=|\/embed\/|\/v\/|youtu\.be\/|\/e\/|watch\?v%3D|&v%3D)([^#\&\?]*)/);
            if (watchMatch && watchMatch[1].length === 11) {
                videoId = watchMatch[1];
            } else {
                // Tenta tratar como ID puro (se for 11 caracteres)
                if (url.length === 11) {
                    videoId = url;
                }
            }
            // Retorna o formato de embed padr√£o do YouTube
            return videoId ? `https://www.youtube.com/embed/${videoId}?autoplay=0` : null;
        }

        // Function to start or restart the quiz
        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            answered = false;
            quizArea.classList.remove('hidden');
            finalScreen.classList.add('hidden');
            renderQuestion();
        }

        // Function to shuffle array (Fisher-Yates) - for question options
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Function to render the current question
        function renderQuestion() {
            if (currentQuestionIndex >= QUIZ_DATA.length) {
                showFinalScreen();
                return;
            }

            answered = false;
            feedbackArea.innerHTML = '';
            nextButton.disabled = true;

            const currentQuestion = QUIZ_DATA[currentQuestionIndex];

            // Update displays
            scoreDisplay.textContent = `Acertos: ${score}`;
            progressDisplay.textContent = `Quest√£o ${currentQuestionIndex + 1}/${QUIZ_DATA.length} (Dificuldade: ${currentQuestion.difficulty})`;
            
            // Render question and options
            questionTextElement.innerHTML = currentQuestion.question; // Use innerHTML to parse LaTeX
            optionsContainer.innerHTML = '';

            // Shuffle options for better randomization
            const shuffledOptions = shuffleArray([...currentQuestion.options]);

            shuffledOptions.forEach((option) => {
                const button = document.createElement('button');
                button.innerHTML = option.text; // Use innerHTML to parse LaTeX
                button.className = 'option-button w-full text-left p-4 rounded-lg bg-gray-100 hover:bg-gray-200 focus:outline-none';
                
                // CHAMA A FUN√á√ÉO DE PR√â-SELE√á√ÉO
                button.onclick = () => prepareConfirmation(button, option);
                optionsContainer.appendChild(button);
            });
        }

        // Function to prepare the confirmation prompt
        function prepareConfirmation(selectedButton, selectedOption) {
            if (answered) return;

            // Armazena a sele√ß√£o temporariamente
            preSelectedOption = selectedOption;
            preSelectedButton = selectedButton;

            // Desabilita as outras op√ß√µes e destaca a escolhida (visualmente, mas ainda n√£o confirmada)
            const optionButtons = document.querySelectorAll('.option-button');
            optionButtons.forEach(btn => {
                btn.classList.add('disabled', 'opacity-70'); // Reduz opacidade e desabilita cliques
                btn.disabled = true;
                btn.classList.remove('selected-for-confirmation'); // Remove destaque anterior
            });
            
            selectedButton.classList.remove('opacity-70');
            selectedButton.classList.add('selected-for-confirmation'); // Novo destaque visual


            // Exibe a √°rea de confirma√ß√£o
            feedbackArea.innerHTML = `
                <div class="feedback-message p-4 rounded-lg bg-blue-100 border border-blue-300 mb-4 text-gray-800">
                    <p class="font-bold mb-3 text-lg">Voc√™ tem certeza desta resposta?</p>
                    <button onclick="confirmSelection()" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg mr-3 transition duration-150">
                        Sim, confirmar
                    </button>
                    <button onclick="cancelSelection()" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition duration-150">
                        N√£o, voltar
                    </button>
                </div>
            `;
        }

        // Function to cancel the confirmation and allow re-selection
        function cancelSelection() {
            // Limpa a √°rea de feedback
            feedbackArea.innerHTML = '';
            
            // Reabilita todos os bot√µes e remove o destaque
            const optionButtons = document.querySelectorAll('.option-button');
            optionButtons.forEach(btn => {
                btn.classList.remove('disabled', 'opacity-70', 'selected-for-confirmation');
                btn.disabled = false;
            });

            // Limpa o estado tempor√°rio
            preSelectedOption = null;
            preSelectedButton = null;
        }

        // Function to handle option selection and feedback after confirmation
        function confirmSelection() {
            if (answered || !preSelectedOption || !preSelectedButton) return;

            const selectedOption = preSelectedOption;
            const selectedButton = preSelectedButton;
            const allOptions = QUIZ_DATA[currentQuestionIndex].options;

            answered = true;
            nextButton.disabled = false;
            
            // Remove a √°rea de confirma√ß√£o
            feedbackArea.innerHTML = ''; 

            // Desabilitar/Estilizar todos os bot√µes de op√ß√£o permanentemente
            const optionButtons = document.querySelectorAll('.option-button');
            optionButtons.forEach(btn => {
                btn.classList.add('disabled', 'cursor-default', 'opacity-70');
                btn.disabled = true;
                btn.classList.remove('selected-for-confirmation'); // Garante que o destaque de sele√ß√£o seja removido
            });

            if (selectedOption.isCorrect) {
                score++;
                selectedButton.classList.remove('bg-gray-100', 'hover:bg-gray-200', 'opacity-70');
                selectedButton.classList.add('correct');
                showFinalFeedback(true, selectedOption.rationale);
            } else {
                selectedButton.classList.remove('bg-gray-100', 'hover:bg-gray-200', 'opacity-70');
                selectedButton.classList.add('incorrect');
                
                // Find and highlight the correct answer
                const correctOption = allOptions.find(opt => opt.isCorrect);
                
                // Percorre todos os bot√µes para encontrar o correto e destac√°-lo
                optionButtons.forEach(btn => {
                    if (btn.innerHTML === correctOption.text) {
                        btn.classList.remove('bg-gray-100', 'hover:bg-gray-200', 'opacity-70');
                        // Destaca o correto com uma borda forte
                        btn.classList.add('correct', 'border-2', 'border-green-700'); 
                    }
                });
                showFinalFeedback(false, correctOption.rationale);
            }
            scoreDisplay.textContent = `Acertos: ${score}`;

            // Limpa o estado tempor√°rio para evitar cliques acidentais
            preSelectedOption = null;
            preSelectedButton = null;
        }

        // Function to display final feedback message
        function showFinalFeedback(isCorrect, rationale) {
            let message = '';
            let colorClass = ''; 
            
            let videoEmbedHtml = '';
            const currentQuestion = QUIZ_DATA[currentQuestionIndex];
            const embedUrl = getYouTubeEmbedUrl(currentQuestion.videoLink);

            if (embedUrl) {
                videoEmbedHtml = `
                    <p class="mt-4 text-sm font-semibold text-gray-700">Explica√ß√£o em V√≠deo:</p>
                    <div class="video-container mt-2 w-full bg-black rounded-lg" style="position: relative; padding-bottom: 56.25%; /* 16:9 aspect ratio */ height: 0; overflow: hidden;">
                        <iframe 
                            src="${embedUrl}" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen 
                            class="absolute top-0 left-0 w-full h-full rounded-lg"
                            title="Explica√ß√£o da Quest√£o ${currentQuestionIndex + 1}"
                        ></iframe>
                    </div>
                `;
            }


            if (isCorrect) {
                message = `<span class="font-bold">üéâ Correto!</span>`;
                colorClass = 'text-green-600';
            } else {
                message = `<span class="font-bold">‚ùå Errado.</span> A alternativa correta est√° destacada em verde.`;
                colorClass = 'text-red-600';
            }

            feedbackArea.innerHTML = `
                <div class="feedback-message p-3 rounded-lg ${colorClass} bg-gray-50 border border-gray-200 mb-4 flex flex-col items-start">
                    ${message}
                    <p class="mt-2 text-sm text-gray-700">${rationale}</p>
                    ${videoEmbedHtml} 
                </div>
            `;
        }

        // Function to go to the next question
        function nextQuestion() {
            currentQuestionIndex++;
            renderQuestion();
        }

        // Function to show the final score screen
        function showFinalScreen() {
            quizArea.classList.add('hidden');
            finalScreen.classList.remove('hidden');
            finalScore.innerHTML = `Sua pontua√ß√£o final √©: <span class="text-blue-600 font-extrabold text-4xl">${score} / ${QUIZ_DATA.length}</span>`;
        }

        // Initialize the quiz when the window loads
        window.onload = startQuiz;
    </script>
</body>
</html>
